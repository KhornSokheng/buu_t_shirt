{"ast":null,"code":"var _jsxFileName = \"D:\\\\year3-1\\\\DBMS\\\\APP G4\\\\nodeApp\\\\buu_t_shirt\\\\client2\\\\src\\\\components\\\\ViewProduct.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport AddCart from \"./AddCart\";\nimport AddQty from \"./AddQty\";\nimport Banner from \"./Banner\";\nimport SelectSize from \"./SelectSize\";\nimport SelectColor from \"./SelectColor\";\nimport { useLocation } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ViewProduct(props) {\n  _s();\n\n  let [prod_id, setProdId] = useState([props.prod_id]);\n  const [prod_list, setList] = useState([]);\n  const [prod_name, setProdName] = useState([]);\n  const [size, setSize] = useState([]);\n  const [amount, setAmount] = useState([]);\n  const [color, setColor] = useState([props.color]); // const [prod_id, setProdId] = useState([]);\n\n  const [cust_id, setCustId] = useState([]);\n  const [prod_price, setProdPrice] = useState([]); // use location hook to get the prod_id\n  // ex: \"/viewproduct/P001\"\n\n  const location = useLocation();\n  console.log(location.pathname.split(\"/\")[2]);\n  prod_id = location.pathname.split(\"/\")[2];\n\n  const loadList = async () => {\n    try {\n      const resp = await fetch(`http://localhost:5000/getProduct/${prod_id}`); // const resp = await fetch(`http://localhost:5000/getProduct/P001`);\n\n      const jsonData = await resp.json();\n      setList(jsonData);\n      console.log(\"Response\", resp);\n      console.log(\"List: \", prod_list);\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  const insertCart = async e => {\n    e.preventDefault();\n\n    try {\n      console.log(prod_id, color, size, amount);\n      const bodyStr = {\n        prod_id,\n        color,\n        size,\n        amount\n      };\n      const resp = await fetch(\"http://localhost:4000/insertCart\", {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(bodyStr)\n      });\n      window.location = \"/cart\";\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  useEffect(() => {\n    console.log(\"Enter useEffect\");\n    loadList();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"single-product\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: insertCart,\n          children: prod_list.map(prod => {\n            // const prodLink = \"/viewproduct/\" + prod.prod_color_id;\n            // console.log(prodLink);\n            // setProdId(prod.prod_id); ERROR\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-sm-4\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"product-item\",\n                    children: [/*#__PURE__*/_jsxDEV(\"figure\", {\n                      className: \"product-thumb\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 81,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"product-content\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"ratings\",\n                        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                          href: \"#\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"ti-star\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 88,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 87,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                          href: \"#\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"ti-star\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 91,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 90,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                          href: \"#\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"ti-star\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 94,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 93,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                          href: \"#\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"ti-star\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 97,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 96,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                          href: \"#\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"ti-star\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 100,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 99,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 86,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 85,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 80,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-sm-6 text-left ml-5\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"\",\n                    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                      className: \"\",\n                      children: prod.prod_name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 111,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                      className: \"prod_id\",\n                      children: [\"Product ID: \", prod.prod_id]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 114,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"form-group quantity\",\n                      onChange: e => {\n                        setColor(e.target.value);\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"font-weight-bold h5 mr-3\",\n                        htmlFor: \"price\",\n                        children: \"Color:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 123,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(SelectColor, {\n                        prod_id: prod.prod_id,\n                        color: color\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 129,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 117,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"form-group quantity\",\n                      onChange: e => {\n                        setSize(e.target.value);\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"font-weight-bold h5 mr-3\",\n                        htmlFor: \"price\",\n                        children: \"Size:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 143,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(SelectSize, {\n                        prod_id: prod.prod_id,\n                        color: color\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 149,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"form-group quantity\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"font-weight-bold h5\",\n                        htmlFor: \"price\",\n                        children: \"Quantity:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 156,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        className: \"form-control d-inline\",\n                        placeholder: \"Quantity\",\n                        id: \"qty\",\n                        onChange: e => {\n                          setAmount(e.target.value);\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 164,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 155,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                      className: \"price text-danger\",\n                      children: [\"\\u0E3F\", prod.prod_price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(AddCart, {\n                    prod_id: prod.prod_id,\n                    color: color,\n                    size: size,\n                    sale_amount: amount,\n                    prod_price: prod.prod_price\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 19\n              }, this)\n            }, void 0, false);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ViewProduct, \"7zo3G0HbDRVxGZWbr/PpZgEDAJE=\", false, function () {\n  return [useLocation];\n});\n\n_c = ViewProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewProduct\");","map":{"version":3,"sources":["D:/year3-1/DBMS/APP G4/nodeApp/buu_t_shirt/client2/src/components/ViewProduct.js"],"names":["React","useEffect","useState","AddCart","AddQty","Banner","SelectSize","SelectColor","useLocation","ViewProduct","props","prod_id","setProdId","prod_list","setList","prod_name","setProdName","size","setSize","amount","setAmount","color","setColor","cust_id","setCustId","prod_price","setProdPrice","location","console","log","pathname","split","loadList","resp","fetch","jsonData","json","err","error","message","insertCart","e","preventDefault","bodyStr","method","headers","body","JSON","stringify","window","map","prod","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport AddCart from \"./AddCart\";\r\nimport AddQty from \"./AddQty\";\r\nimport Banner from \"./Banner\";\r\nimport SelectSize from \"./SelectSize\";\r\nimport SelectColor from \"./SelectColor\";\r\nimport { useLocation } from \"react-router\";\r\n\r\nexport default function ViewProduct(props) {\r\n let [prod_id, setProdId] = useState([props.prod_id]);\r\n  const [prod_list, setList] = useState([]);\r\n  const [prod_name, setProdName] = useState([]);\r\n  const [size, setSize] = useState([]);\r\n  const [amount, setAmount] = useState([]);\r\n  const [color, setColor] = useState([props.color]);\r\n  // const [prod_id, setProdId] = useState([]);\r\n  const [cust_id, setCustId] = useState([]);\r\n  const [prod_price, setProdPrice] = useState([]);\r\n\r\n  // use location hook to get the prod_id\r\n  // ex: \"/viewproduct/P001\"\r\n  const location = useLocation();\r\n  console.log(location.pathname.split(\"/\")[2]);\r\n  prod_id = location.pathname.split(\"/\")[2];\r\n\r\n  const loadList = async () => {\r\n    try {      \r\n\r\n      const resp = await fetch(`http://localhost:5000/getProduct/${prod_id}`);\r\n      // const resp = await fetch(`http://localhost:5000/getProduct/P001`);\r\n      const jsonData = await resp.json();\r\n\r\n      setList(jsonData);\r\n\r\n      console.log(\"Response\", resp);\r\n      console.log(\"List: \", prod_list);\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  const insertCart = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      console.log(prod_id, color, size, amount);\r\n      const bodyStr = { prod_id, color, size, amount };\r\n      const resp = await fetch(\"http://localhost:4000/insertCart\", {\r\n        method: \"POST\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify(bodyStr),\r\n      });\r\n      window.location = \"/cart\";\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    console.log(\"Enter useEffect\");\r\n    loadList();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      {/* Featured Product start */}\r\n      <section className=\"single-product\">\r\n        <div className=\"container\">\r\n          <form onSubmit={insertCart}>\r\n            {prod_list.map((prod) => {\r\n              // const prodLink = \"/viewproduct/\" + prod.prod_color_id;\r\n              // console.log(prodLink);\r\n              // setProdId(prod.prod_id); ERROR\r\n              return (\r\n                <>\r\n                  <div className=\"row\">\r\n                    {/* image of shirt section */}\r\n                    <div className=\"col-sm-4\">\r\n                      <div className=\"product-item\">\r\n                        <figure className=\"product-thumb\">\r\n                          {/* <img src={prod.image_url} alt=\"image shirt\" width=\"100%\" height=\"100%\"/> */}\r\n                          {/* <img src={prod.image_url} /> */}\r\n                        </figure>\r\n                        <div className=\"product-content\">\r\n                          <div className=\"ratings\">\r\n                            <a href=\"#\">\r\n                              <i className=\"ti-star\" />\r\n                            </a>\r\n                            <a href=\"#\">\r\n                              <i className=\"ti-star\" />\r\n                            </a>\r\n                            <a href=\"#\">\r\n                              <i className=\"ti-star\" />\r\n                            </a>\r\n                            <a href=\"#\">\r\n                              <i className=\"ti-star\" />\r\n                            </a>\r\n                            <a href=\"#\">\r\n                              <i className=\"ti-star\" />\r\n                            </a>\r\n                          </div>\r\n                          {/* <p className=\"price text-danger\">฿{prod.prod_price}</p> */}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Detail section */}\r\n                    <div className=\"col-sm-6 text-left ml-5\">\r\n                      <div className=\"\">\r\n                        <h1 className=\"\">{prod.prod_name}</h1>\r\n                      </div>\r\n                      <div className=\"\">\r\n                        <h5 className=\"prod_id\">Product ID: {prod.prod_id}</h5>\r\n                        {/* <h5 className=\"color\">Color: {prod.color}</h5> */}\r\n\r\n                        <div\r\n                          className=\"form-group quantity\"\r\n                          onChange={(e) => {\r\n                            setColor(e.target.value);\r\n                          }}\r\n                        >\r\n                          <label\r\n                            className=\"font-weight-bold h5 mr-3\"\r\n                            htmlFor=\"price\"\r\n                          >\r\n                            Color:\r\n                          </label>\r\n                          <SelectColor prod_id={prod.prod_id} color={color} />\r\n                          {/* <SelectSize /> */}\r\n                        </div>\r\n                        {/* <h5 className=\"size\">\r\n                          Size: <SelectSize onChange={(e) => {\r\n                              setSize(e.target.value);\r\n                            }}/>\r\n                        </h5> */}\r\n                        <div\r\n                          className=\"form-group quantity\"\r\n                          onChange={(e) => {\r\n                            setSize(e.target.value);\r\n                          }}\r\n                        >\r\n                          <label\r\n                            className=\"font-weight-bold h5 mr-3\"\r\n                            htmlFor=\"price\"\r\n                          >\r\n                            Size:\r\n                          </label>\r\n                          <SelectSize prod_id={prod.prod_id} color={color} />\r\n                          {/* <SelectSize /> */}\r\n                        </div>\r\n                        {/* <h5 className=\"quantity\">\r\n                          QTY: <AddQty />\r\n                        </h5> */}\r\n                        <div className=\"form-group quantity\">\r\n                          <label\r\n                            className=\"font-weight-bold h5\"\r\n                            htmlFor=\"price\"\r\n                          >\r\n                            Quantity:\r\n                          </label>\r\n                          {/* <h5 className=\"quantity d-inline\">Quantity</h5> */}\r\n\r\n                          <input\r\n                            type=\"number\"\r\n                            className=\"form-control d-inline\"\r\n                            placeholder=\"Quantity\"\r\n                            id=\"qty\"\r\n                            onChange={(e) => {\r\n                              setAmount(e.target.value);\r\n                            }}\r\n                          />\r\n                        </div>\r\n                        <h2 className=\"price text-danger\">\r\n                          ฿{prod.prod_price}\r\n                        </h2>\r\n                      </div>\r\n                      {/* <button href=\"#\" className=\"btn btn-success text-center\">\r\n                        Add to cart\r\n                      </button> */}\r\n                      <AddCart\r\n                        prod_id={prod.prod_id}\r\n                        color={color}\r\n                        size={size}\r\n                        sale_amount={amount}\r\n                        prod_price={prod.prod_price}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </>\r\n              );\r\n            })}\r\n          </form>\r\n        </div>\r\n      </section>\r\n      {/* Featured Product end */}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}